<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:VanekCraftInstaller.ViewModel">

    <local:StepTextConverter x:Key="StepTextConverter"/>
    <local:StepStateConverter x:Key="StepStateConverter"/>

    <!-- Fonty-->
    <FontFamily x:Key="Ubuntu">pack://application:,,,/Assets/Fonts/#Ubuntu</FontFamily>
    <FontFamily x:Key="UbuntuBold">pack://application:,,,/Assets/Fonts/#Ubuntu Bold</FontFamily>
    <FontFamily x:Key="UbuntuMono">pack://application:,,,/Assets/Fonts/#Ubuntu Mono</FontFamily>
    
    <!-- Tmavý styl okna -->
    <Style x:Key="DarkWindow" TargetType="Window">
        <Setter Property="Background" Value="#FF1E1E1E"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="FontFamily" Value="Segoe UI"/>
    </Style>

    <!-- Jemný stín dolů -->
    <LinearGradientBrush x:Key="BottomShadowBrush" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#40000000" Offset="0"/>
        <GradientStop Color="Transparent" Offset="1"/>
    </LinearGradientBrush>

    <!-- Nadpis -->
    <Style x:Key="HeadingText" TargetType="TextBlock">
        <Setter Property="FontSize" Value="24"/>
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="Margin" Value="0,0,0,10"/>
    </Style>

    <!-- Běžný text -->
    <Style x:Key="BodyText" TargetType="TextBlock">
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="Foreground" Value="#CCCCCC"/>
        <Setter Property="TextWrapping" Value="Wrap"/>
        <Setter Property="Margin" Value="0,0,0,10"/>
    </Style>

    <!-- Tlačítko -->
    <Style x:Key="InstallerButton" TargetType="Button">
        <Setter Property="Background" Value="#FF2D2D30"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="FontFamily" Value="Ubuntu Mono"/>
        <Setter Property="Padding" Value="10,5"/>
        <Setter Property="Margin" Value="5"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="#FF3E3E42"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="border"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="4">
                        <ContentPresenter HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                    </Border>

                    <ControlTemplate.Triggers>
                        <!-- Hover -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="border" Property="Background" Value="#E95420"/>
                            <Setter TargetName="border" Property="BorderBrush" Value="#FF7A3E00"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>

                        <!-- Fade při kliknutí -->
                        <Trigger Property="IsPressed" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetName="border"
                                                    Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                    To="#FF1F1F22"
                                                    Duration="0:0:0.1"
                                                    AutoReverse="True"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                        </Trigger>

                        <!-- Disabled -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" Value="#FF888888"/>
                            <Setter Property="Background" Value="#FF1A1A1A"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ProgressBar -->
    <Style x:Key="AccentProgressBar" TargetType="ProgressBar">
        <Setter Property="Height" Value="20"/>
        <Setter Property="Foreground" Value="#FF0A84FF"/>
        <Setter Property="Background" Value="#FF2D2D30"/>
        <Setter Property="BorderBrush" Value="#FF3E3E42"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ProgressBar">
                    <Grid x:Name="Root" SnapsToDevicePixels="true">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4"/>
                        <Rectangle x:Name="PART_Track" Fill="{TemplateBinding Background}" />
                        <Rectangle x:Name="PART_Indicator"
                                   Fill="{TemplateBinding Foreground}"
                                   HorizontalAlignment="Left"
                                   RadiusX="4" RadiusY="4"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsIndeterminate" Value="True">
                            <Setter TargetName="PART_Indicator" Property="Visibility" Value="Collapsed"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Label s Ubuntu Mono -->
    <Style x:Key="InstallerLabel" TargetType="Label">
        <Setter Property="Foreground" Value="#CCCCCC"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="FontFamily" Value="Ubuntu Mono"/>
        <Setter Property="Margin" Value="0,5,0,5"/>
    </Style>

    <!-- RadioButton -->
    <Style x:Key="InstallerRadioButton" TargetType="RadioButton">
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="Margin" Value="5"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RadioButton">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse x:Name="OuterCircle"
                                 Width="16" Height="16"
                                 Stroke="#FFCCCCCC"
                                 StrokeThickness="2"
                                 Fill="Transparent"
                                 Margin="0,0,5,0"/>
                        <Ellipse x:Name="InnerCircle"
                                 Width="8" Height="8"
                                 Fill="#FF0A84FF"
                                 Visibility="Collapsed"
                                 VerticalAlignment="Center"/>
                        <ContentPresenter VerticalAlignment="Center"/>
                    </StackPanel>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="InnerCircle" Property="Visibility" Value="Visible"/>
                            <Setter TargetName="OuterCircle" Property="Stroke" Value="#FF0A84FF"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="OuterCircle" Property="Stroke" Value="#FF5A5A5F"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" Value="#888888"/>
                            <Setter TargetName="OuterCircle" Property="Stroke" Value="#444444"/>
                            <Setter TargetName="InnerCircle" Property="Fill" Value="#444444"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

<!--Aktuální krok -->
    <Style x:Key="InstallerStepTextStyle" TargetType="TextBlock">
        <Setter Property="Margin" Value="0,0,0,10"/>
        <Setter Property="Foreground" Value="Black"/>
        <Style.Triggers>
            <DataTrigger Binding="{Binding DataContext.CurrentStep, 
                    RelativeSource={RelativeSource AncestorType=Window}}" 
                     Value="{Binding}">
                <Setter Property="FontWeight" Value="Bold"/>
                <Setter Property="Foreground" Value="DarkBlue"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <!-- Doačasný DataTemplate pro zobrazení aktuálního kroku -->
    <DataTemplate x:Key="StepItemTemplate">
        <StackPanel Orientation="Horizontal" Margin="5">
            <TextBlock FontSize="16" Margin="0,0,5,0">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Text" Value="○"/>
                        <Setter Property="Foreground" Value="Gray"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding State}" Value="Completed">
                                <Setter Property="Text" Value="✔"/>
                                <Setter Property="Foreground" Value="Gray"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding State}" Value="Active">
                                <Setter Property="Text" Value="⟳"/>
                                <Setter Property="Foreground" Value="LightBlue"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
            <TextBlock Text="{Binding Name}" FontSize="14"/>
        </StackPanel>
    </DataTemplate>
    
</ResourceDictionary>